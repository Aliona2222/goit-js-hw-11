{"mappings":"AAAA,MAIMA,EAAUC,SAASC,cAAc,YACjCC,EAAiBF,SAASC,cAAc,cAE9C,IAAIE,EAAc,EACdC,EAAqB,GAGzBF,EAAeG,MAAMC,QAAU,OAG/B,MAAMC,EAAW,IAAIC,eAAe,aAAc,CAChDC,UAAU,IA+BZC,eAAeC,EAAYC,EAAOC,GAChC,IACE,MAAMC,QAAiBC,MAAMC,IAAI,2BAA4B,CAC3DC,OAAQ,CACNC,IAlDQ,qCAmDRC,EAAGP,EACHQ,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAtDe,GAuDfV,KAAMA,MAIJW,KAAEA,EAAIC,UAAEA,GAAcX,EAASY,KACrC,GAAoB,IAAhBF,EAAKG,OAEP,YADAC,SAASC,OAAOC,QAAQ,6EAyB9B,SAAuBC,GACnB,MAAMC,EAAaD,EAAOE,KAAKC,IAC7B,MAAMC,EAAOnC,SAASoC,cAAc,OAapC,OAZAD,EAAKE,UAAY,sBACJH,EAAMI,2DACHJ,EAAMK,sBAAsBL,EAAMM,yGAEPN,EAAMO,6DACNP,EAAMQ,gEACHR,EAAMS,oEACLT,EAAMU,wDAK9CT,CAAI,IAGbpC,EAAQ8C,UAAUb,GAClBzB,EAASuC,S,CAxCTC,CAAcvB,GACdjB,EAASuC,UAEI,IAATjC,GACFe,SAASC,OAAOmB,QAAQ,oBAAoBvB,aAG1CD,EAAKG,OAxEU,IAyEjBzB,EAAeG,MAAMC,QAAU,OAC/BsB,SAASC,OAAOoB,KAAK,+DAErB/C,EAAeG,MAAMC,QAAU,O,CAEjC,MAAO4C,GACPC,QAAQD,MAAM,yBAA0BA,GACxCtB,SAASC,OAAOC,QAAQ,kD,EA/D5B9B,SAASoD,eAAe,eAAeC,iBAAiB,UAAU3C,MAAO4C,IACvEA,EAAMC,iBACNpD,EAAc,EACdJ,EAAQsC,UAAY,GACpBnC,EAAeG,MAAMC,QAAU,OAE/B,MAAMkD,EAAcF,EAAMG,OAAOD,YAAYE,MAAMC,OAE9CH,IAELpD,EAAqBoD,QACf7C,EAAY6C,EAAarD,GAAY,IAG7CyD,OAAOP,iBAAiB,UAAU3C,UAGhC,MAAMmD,EAAgB9D,EAAQ+D,wBAAwBC,OAC/BH,OAAOI,QAAUJ,OAAOK,aAEzBJ,EApCC,MAqCrB1D,UACMQ,EAAYP,EAAoBD,G","sources":["src/index.js"],"sourcesContent":["const API_KEY = '38558428-cb3057c82e30c898989dfbccf';\nconst ITEMS_PER_PAGE = 40;\nconst SCROLL_THRESHOLD = 200;\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\nlet loading = false;\n\nloadMoreButton.style.display = 'none';\n\n// SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n});\n\ndocument.getElementById('search-form').addEventListener('submit', async (event) => {\n  event.preventDefault();\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n\n  const searchQuery = event.target.searchQuery.value.trim();\n\n  if (!searchQuery) return;\n\n  currentSearchQuery = searchQuery;\n  await fetchImages(searchQuery, currentPage);\n});\n\nwindow.addEventListener('scroll', async () => {\n  if (loading) return;\n\n  const galleryHeight = gallery.getBoundingClientRect().height;\n  const scrollPosition = window.scrollY + window.innerHeight;\n\n  if (scrollPosition >= galleryHeight - SCROLL_THRESHOLD) {\n    currentPage++;\n    await fetchImages(currentSearchQuery, currentPage);\n  }\n});\n\n\n\nasync function fetchImages(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: ITEMS_PER_PAGE,\n        page: page,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n    if (hits.length === 0) {\n      Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n      return;\n    }\n\n    displayImages(hits);\n    lightbox.refresh();\n\n    if (page === 1) {\n      Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n    }\n\n    if (hits.length < ITEMS_PER_PAGE) {\n      loadMoreButton.style.display = 'none';\n      Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    Notiflix.Notify.failure('Failed to fetch images. Please try again later.');\n  }\n}\n\n\n\nfunction displayImages(images) {\n    const imageCards = images.map((image) => {\n      const card = document.createElement('div');\n      card.innerHTML = `\n        <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b>: ${image.likes}</p>\n            <p class=\"info-item\"><b>Views</b>: ${image.views}</p>\n            <p class=\"info-item\"><b>Comments</b>: ${image.comments}</p>\n            <p class=\"info-item\"><b>Downloads</b>: ${image.downloads}</p>\n          </div>\n        </a>\n      `;\n  \n      return card;\n    });\n  \n    gallery.append(...imageCards);\n    lightbox.refresh(); \n  }"],"names":["$1f0dc3b9307be026$var$gallery","document","querySelector","$1f0dc3b9307be026$var$loadMoreButton","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$currentSearchQuery","style","display","$1f0dc3b9307be026$var$lightbox","SimpleLightbox","captions","async","$1f0dc3b9307be026$var$fetchImages","query","page","response","axios","get","params","key","q","image_type","orientation","safesearch","per_page","hits","totalHits","data","length","Notiflix","Notify","failure","images","imageCards","map","image","card","createElement","innerHTML","largeImageURL","webformatURL","tags","likes","views","comments","downloads","append","refresh","$1f0dc3b9307be026$var$displayImages","success","info","error","console","getElementById","addEventListener","event","preventDefault","searchQuery","target","value","trim","window","galleryHeight","getBoundingClientRect","height","scrollY","innerHeight"],"version":3,"file":"index.5d6bee13.js.map"}